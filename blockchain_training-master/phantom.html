<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <title>Practice</title>
    <link rel="stylesheet" href="phantom.css">

  </head>
  <body>
      <br>
    <div>
    <img src="images/solana-logo-freelogovectors.net_.svg" alt="" style="width: 100px;height:100px;" class="center"> <br>
    &nbsp; &nbsp;
    <img src="images/sqzgmbkggvc1uwgapeuy.webp" alt="" style="width: 100px;height:100px;" class="center">
  </div>
<br>
  <div class="typewriter">
    <h5 style="text-align: center;" >Welcome To Phantom!</h5>
  </div>
    
    <br>
  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.7.2-rc.0/web3.min.js" integrity="sha512-REWiGZVmhU2S5eIov/DuNrsq4djWnPaAHSvXrbLLLaI0r/gW+wh1utIzxt0iB4IQLgXhNDj5mR0YMBjrkKhVMA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
    <script>


  async function connected(){
    const isPhantomInstalled = window.solana && window.solana.isPhantom;
    console.log(" Phantom is connected! ");
    alert("Phantom is connected!");
    document.getElementById("btn9").disabled = true; 
      if ("solana" in window) {
      const provider = window.solana;

      if (provider.isPhantom) {
      return provider;
    }
  }
    else {
    document.getElementById("btn9").disabled = false;
    alert("Please install Phantom");
    window.open("https://phantom.app/", "_blank");
          };
          
}

  function ShowAndHide() {
        let x = document.getElementById('SectionName');
        if (x.style.display == 'none') {
        x.style.display = 'block';
        } 
  }

  function ShowAndHide2() {
      let x = document.getElementById('SectionName');
      if (x.style.display == 'block') {
      x.style.display = 'none';
      } 

  }

  async function getWalletAddress(){
    try {
    const resp = await window.solana.connect();
    resp.publicKey.toString();
    console.log("your wallet address is =>" + resp.publicKey.toString());
    var result = resp.publicKey.toString();
    document.getElementsByName('displaywallet')[0].value = result;
    } 
    catch (err) {
    alert("User rejected the request");
    // { code: 4001, message: 'User rejected the request.' }
      }
  }



  async function disconnectPhantom(){
    window.solana.disconnect();
    window.solana.request({ method: "disconnect" });
    window.solana.on('disconnect', () => console.log("disconnected!"));
    alert("You are Disconnected!");
    const btn = document.getElementById('btn9');
    btn.style.display = 'block';

    document.getElementById("btn9").disabled = false; 
    document.getElementsByName('displaywallet')[0].value = "";
    document.getElementsByName('displaybalance')[0].value = "";
    document.getElementsByName('displaytransactionid')[0].value = "";

  }


  function copyTransactionId(){
    var copyText = document.getElementById("transactionid"); //const
    copyText.select();
    copyText.setSelectionRange(0, 99999);
    navigator.clipboard.writeText(copyText.value);
    alert("Copied the text: " + copyText.value);
    }

    </script>


<button class="button-62 no-drop" onclick="connected(); ShowAndHide(); getWalletAddress();  getBalancee();" style="background-color:  lightgrey" id="btn9">  Connect To Phantom </button><br><br>

<div id="SectionName" style="display:none">

<span class="label warning">Your Wallet Address</span>
<input type="text" name="displaywallet" width="200" height="50px" readonly> <br><br>


<label class="label warning" for="network">Choose your network:</label>                                                                                                                                                                                                   &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;                                                                                                                                                                    
<select id="netWork" name="netWork" > 
<option value="" disabled selected>Select Network</option>
<option value="mainnet-beta">MainNet</option>
<option value="testnet">TestNet</option>
<option value="devnet">DevNet</option>
</select> <br><br>

<span class="label warning">Balance</span>                                                                                                                                                                                                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<input type="text" name="displaybalance" width="200" height="50px" readonly> <br><br>
<br>
<div class="typewriter">
  <h5 style="text-align: center;" >Easy Transactions!</h5>
</div>


<input name="receiver" type="text" placeholder="Reciever's Wallet Address" id="phantomreceiver"/>
&nbsp;&nbsp;&nbsp;



<input name="amount" type="text" placeholder="Amount of SOL to send" id="quantity"/>
<button class="button-62" onclick="transferSOL()" id="btn4">Click to send</button> &nbsp;&nbsp;&nbsp; 
<button class="button-62" onclick="clear()" id="clear" >Clear Fields</button> <br>
<br>

<span class="label warning">Transaction Hash: </span> 
<input type="text" name="displaytransactionid" width="200" height="50px" id="transactionid"readonly> <input type="button" class="button-62" value="Click to copy!" onclick="copyTransactionId();"/> <br><br>
<br>

<button class="button-62" onclick="disconnectPhantom(); ShowAndHide2();" style="background-color: lightgrey"> Disconnect Connection </button><br><br>

</div>
<script src="./phantom.js"></script>
</body>
</html>