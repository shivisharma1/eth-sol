<!doctype html>

<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <title>Practice</title>
    <link rel="stylesheet" href="metamask.css">
 
    

  </head>

  <body>
    <br>
    <div>
    <img src="images/ethereum-eth-logo.png" alt="" style="width: 100px;height:100px;" class="center">
    <img src="images/MetaMask_Fox.svg.webp" alt="" style="width: 100px;height:100px;" class="center">
  </div>

  <img src="images/special-effects-wolf-5a3c12cc927e03.7739529915138864126-removebg-preview.png" alt="" style="float:right">




<br><br>
  <div class="typewriter">
    <h3 style="text-align: center;" >Welcome To MetaMask!</h3>
  </div>
    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.7.2-rc.0/web3.min.js" integrity="sha512-REWiGZVmhU2S5eIov/DuNrsq4djWnPaAHSvXrbLLLaI0r/gW+wh1utIzxt0iB4IQLgXhNDj5mR0YMBjrkKhVMA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
    <script>
      
      
      let web3 = new Web3(window.ethereum);

        // async function invoke() {
        //     if (typeof window.ethereum !== 'undefined') {
        //         //console.log(window.ethereum.isMetaMask);
        //   }
        //}
        
  
    function showAlert(){
      if (typeof window.ethereum !== 'undefined') {
                console.log(window.ethereum.isMetaMask);
                alert("MetaMask is installed!");
                document.getElementById("myBtn").disabled = true;
      
                
    }
    else {
      document.getElementById("myBtn").disabled = false;
      alert("Please install Metamask");
      window.location.href = "https://metamask.io/";
    }
  }

  
  function ShowAndHide() {
    var x = document.getElementById('SectionName');
    if (x.style.display == 'none') {
        x.style.display = 'block';
    } else {
        x.style.display = 'none';
    }
}
    

  

        async function invoke2(){
        let address = await ethereum.request({ method: 'eth_requestAccounts' });
        var accounts = await web3.eth.getAccounts()
        console.log(address);
        //document.getElementById("balance").innerHTML = balanceInETH  + "ETH";
        var result = accounts;
        document.getElementsByName('displaywallet')[0].value = result;
        }
      
    
      
        
          async function invoke3(){
          //console.log(web3.eth);
          address = await ethereum.request({ method: 'eth_requestAccounts' });
          let balance = await web3.eth.getBalance(address[0]);
          //console.log(balance);
          var balanceInETH = web3.utils.fromWei(balance, "ether")
          //document.getElementById("balance").innerHTML = balanceInETH  + "ETH";
          var result = balance/1000000000000000000 + " "+"ETH";
          document.getElementsByName('displaybalance')[0].value = result;
         
         }
         
         

          async function invoke4(){
          let networkId = await web3.eth.net.getId();
          var result = networkId;
          //console.log(networkId);
          document.getElementsByName('displaynetwork')[0].value = result;
          }

          // async function invoke5(){
          // let ropstenChainId = 3;
          // //console.log(web3.utils.toHex(ropstenChainId));
          // let hex = web3.utils.toHex(ropstenChainId);
          // var result = hex;
          // document.getElementsByName('displayhex')[0].value = result;
          // }

          async function invoke6(){
          ropstenChainId = 1;

            try {
            await window.ethereum.request({
            method: 'wallet_switchEthereumChain',
            params: [{chainId: web3.utils.toHex(ropstenChainId)}]
            
            })

            } catch(e) {
              console.log(e);
                }

            document.getElementById('displaywallet').value = ' ';
            document.getElementById('displaybalance').value = ' ';
            document.getElementById('displaynetwork').value = ' ';
          }

          async function invoke7(){
            
            try {
              address = await ethereum.request({ method: 'eth_requestAccounts' });
              let sender = address[0];
              let Receiver = document.getElementById("address");
              console.log(Receiver);
              let ethvalue = document.getElementById("ethvalue");
              let receiver = Receiver.value
              let eth = ethvalue.value;
              web3.eth.sendTransaction({to:receiver, from:sender,value: web3.utils.toWei(eth)},function (err, res){
              console.log('err', err);
              console.log('res', res);
                });
             
           } catch(e) {
                console.log('error ==> ', e);
                }
              }
                

            async function invoke8() {
            const walletAddress = await window.ethereum.request({
            method: "eth_requestAccounts",
            params: [
            {
          eth_accounts: {}
            }
      ]
    });
  }

</script>
<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<button class="button-62" id = "myBtn" onclick="showAlert(); ShowAndHide(); invoke2(); invoke3(); invoke4();"  style="background-color: lightblue"> Connect To Metamask</button><br><br>

<DIV ID="SectionName" STYLE="display:none">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="label warning">Your Wallet Address</span> &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<input type="text" name="displaywallet" width="200" height="50px"> <br><br> 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<span class="label warning">Your Balance </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<input type="text" name="displaybalance" width="200" height="50px"> <br><br>


&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<span class="label warning">Network Id</span>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<input type="text" name="displaynetwork" width="200" height="50px"> <br><br>

<!-- &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<button class="button-62" onclick="invoke5()" style="background-color: lightgreen"> Get Hex Of Ropsten </button> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="text" name="displayhex" width="200" height="50px"> <br><br> -->

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

<button class="button-62" onclick="invoke6();" style="background-color: lightgrey"> Switch Network </button> <br><br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<form method="post">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input name="address" id="address" type="text" class="feedback-input" placeholder="Reciever Address" required="required" style="text-align: center;"/>   
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input name="ETH" id="ethvalue" type="text" class="feedback-input" placeholder="ETH to Transfer" required="required" style="text-align: center;" />   
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="button" class="button-62" value="Transact ETH" id="submitbtn" onclick="invoke7()"/>

</div>
 </form>
 <br><br>

 <!-- Code injected by live-server -->
<script type="text/javascript">
	// <![CDATA[  <-- For SVG support
	if ('WebSocket' in window) {
		(function () {
			function refreshCSS() {
				var sheets = [].slice.call(document.getElementsByTagName("link"));
				var head = document.getElementsByTagName("head")[0];
				for (var i = 0; i < sheets.length; ++i) {
					var elem = sheets[i];
					var parent = elem.parentElement || head;
					parent.removeChild(elem);
					var rel = elem.rel;
					if (elem.href && typeof rel != "string" || rel.length == 0 || rel.toLowerCase() == "stylesheet") {
						var url = elem.href.replace(/(&|\?)_cacheOverride=\d+/, '');
						elem.href = url + (url.indexOf('?') >= 0 ? '&' : '?') + '_cacheOverride=' + (new Date().valueOf());
					}
					parent.appendChild(elem);
				}
			}
			var protocol = window.location.protocol === 'http:' ? 'ws://' : 'wss://';
			var address = protocol + window.location.host + window.location.pathname + '/ws';
			var socket = new WebSocket(address);
			socket.onmessage = function (msg) {
				if (msg.data == 'reload') window.location.reload();
				else if (msg.data == 'refreshcss') refreshCSS();
			};
			if (sessionStorage && !sessionStorage.getItem('IsThisFirstTime_Log_From_LiveServer')) {
				console.log('Live reload enabled.');
				sessionStorage.setItem('IsThisFirstTime_Log_From_LiveServer', true);
			}
		})();
	}
	else {
		console.error('Upgrade your browser. This Browser is NOT supported WebSocket for Live-Reloading.');
	}
	// ]]>
</script></body>
</html>